# Platform service namespaces with Pod Security Standards

---
apiVersion: v1
kind: Namespace
metadata:
  name: metallb-system
  labels:
    app.kubernetes.io/name: metallb-system
    app.kubernetes.io/component: networking
    app.kubernetes.io/part-of: nerv-platform
    # MetalLB needs privileged access for networking operations
    pod-security.kubernetes.io/enforce: privileged
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/warn: restricted

---
apiVersion: v1
kind: Namespace
metadata:
  name: cert-manager
  labels:
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/component: certificates
    app.kubernetes.io/part-of: nerv-platform
    # cert-manager can run with baseline security
    pod-security.kubernetes.io/enforce: baseline
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/warn: restricted

---
apiVersion: v1
kind: Namespace
metadata:
  name: traefik-system
  labels:
    app.kubernetes.io/name: traefik-system
    app.kubernetes.io/component: ingress
    app.kubernetes.io/part-of: nerv-platform
    # Traefik needs baseline for network binding capabilities
    pod-security.kubernetes.io/enforce: baseline
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/warn: restricted

---
apiVersion: v1
kind: Namespace
metadata:
  name: longhorn-system
  labels:
    app.kubernetes.io/name: longhorn-system
    app.kubernetes.io/component: storage
    app.kubernetes.io/part-of: nerv-platform
    # Longhorn needs privileged access for storage operations
    pod-security.kubernetes.io/enforce: privileged
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/warn: restricted